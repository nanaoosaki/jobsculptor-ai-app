// Core resume styles (YC-Eddie inspired)
@use 'tokens' as *;

// Define local fallback variables not yet in design tokens
$font-family-body: $baseFontFamily !default;
$font-size-body: $baseFontSize !default;
$line-height-body: $baseLineHeight !default;
$line-height-tight: $font-lineHeight-tight !default; // From token
$paper-width-a4: 8.27in !default; // Standard A4 width (210mm)
$paper-padding-vertical: 1cm !default;
$paper-padding-horizontal: 1cm !default;
$background-color-paper: #ffffff !default;
$font-weight-bold: $font-weight-bold !default; // From token
$text-color-primary: $textColor !default;
$text-color-headings: $darkColor !default;
$text-color-secondary: $textColor !default;
$text-color-muted: #6c757d !default;
$contact-divider-width: 90% !default;
$section-header-fg: $darkColor !default;
$section-header-bg: transparent !default;
$section-header-border: none !default;
$spacing-xsmall: 0.25rem !default;
$spacing-small: 0.5rem !default;
$spacing-medium: 1rem !default;
$spacing-large: 1.5rem !default;
$spacing-xlarge: 2rem !default;
$font-size-h1: 2rem !default;
$font-size-h2: 1.75rem !default;

// Style isolation - prevent Bootstrap/UI styles from leaking in
.resume-preview-container .tailored-resume-content,
.resume-preview-container .tailored-resume-content * {
  // Reset inherited properties that cause styling conflicts
  line-height: inherit;
  font-family: $font-family-body;
  box-sizing: border-box;
}

// Container for the actual resume content
.tailored-resume-content {
    width: $paper-width-a4;
    max-width: 100%; // Ensure it fits within parent containers
    margin: 0 auto; // Centering within the preview container
    padding: $paper-padding-vertical $paper-padding-horizontal;
    background-color: $background-color-paper; // White paper background
    font-family: $font-family-body;
    font-size: $font-size-body;
    line-height: $line-height-tight; // Use tighter line height
    color: $text-color-primary;
}

// Contact Section Specifics
.contact-section {
    text-align: center;
    margin-bottom: $spacing-medium;

    p {
        margin-bottom: $spacing-xsmall; // Tighter spacing for contact lines
        line-height: $line-height-tight; // Use tighter line height
    }

    .name {
        font-size: $font-size-h1;
        font-weight: $font-weight-bold;
        color: $text-color-headings;
        margin-bottom: $spacing-small;
    }
}

.contact-divider {
    border: none;
    height: 1px;
    background-color: $text-color-headings;
    width: $contact-divider-width;
    margin: $spacing-medium auto; // Centered divider
}

// Section Box Styling â€“ blue outline with transparent fill
.section-box {
    margin: $space-section-y 0; // Use existing token for spacing around box
    padding: $sectionHeaderPaddingVert $sectionHeaderPaddingHoriz; // Use specific tokens
    background: transparent;  // transparent fill
    color: $primaryColor;  // blue text color
    border: 2px solid $primaryColor !important;  // light blue outline, override inline styles
    font-weight: $font-weight-bold;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    display: block;  // Explicitly set to block (though likely default)
    width: auto;     // Explicitly set width to auto
    text-align: left; // left-align header text
    font-size: $sectionHeaderFontSize; // Apply font-size directly
    line-height: $sectionHeaderLineHeight; // Apply line-height directly
    break-inside: avoid; // Prevent section headers breaking across pages
    break-after: avoid;
    margin-bottom: $section-box-margin-bottom; // Use new token for consistent margin
    margin-left: $content-left-margin; // Ensure section headers align with content
}

// Resume Section Styling
.resume-section {
    margin-bottom: $section-spacing-vertical;
    margin-left: 0; // No margin at section level to prevent stacking
    padding-left: 0; // No padding at section level to prevent stacking
    
    // All section content containers need the same left margin
    .summary-content, .experience-content, .education-content,
    .skills-content, .projects-content {
        margin-left: $content-left-margin; // Use the same token as section-box
    }
}

// Job Title Box Styling
.job-title-box {
  all: unset; // Reset any existing styles to prevent conflicts
  background-color: var(--job-title-box-backgroundColor);
  color: var(--job-title-box-color);
  border: var(--job-title-box-borderWidth) var(--job-title-box-borderStyle) var(--job-title-box-borderColor);
  border-radius: var(--job-title-box-borderRadius, 3px); // Fallback for backward compatibility
  padding: var(--job-title-box-paddingVertical, 0.2rem) var(--job-title-box-paddingHorizontal, 0.4rem);
  margin-top: var(--job-title-box-marginTop, 0.1rem);
  margin-bottom: var(--job-title-box-marginBottom, 0.1rem);
  font-weight: var(--job-title-box-fontWeight, 600);
  line-height: var(--job-title-box-lineHeight, 1.2);
  font-family: var(--job-title-box-fontFamily, $font-family-body);
  flex: 1 1 auto; // Allow title to shrink when needed
  overflow-wrap: anywhere; // Prevent horizontal scrolling with long words
  break-inside: avoid; // Prevent box breaking across pages
  display: inline-block; // Maintain box model for styling
}

// Position Bar Styling - Updated
.position-bar {
    background: $color-positionBar-bg;
    padding: 0.25rem 0.45rem;
    margin-top: 0.4rem;
    margin-bottom: $position-line-margin-bottom; // Token for consistent spacing
    display: flex;
    justify-content: space-between; // title left, dates right
    align-items: center; // Vertically center content
    flex-wrap: wrap; // Allow wrapping for very long titles
    break-inside: avoid; // Prevent position bar breaking across pages
    
    .role,
    .company-name,
    .institution,
    .project-title,
    .degree,
    .dates,
    .location {
        font-weight: $font-weight-bold;
    }

    .location, .dates {
        font-style: normal; // remove italic
        font-weight: $font-weight-bold; // make bold
        color: $text-color-secondary;
        text-align: right;
        margin-left: 0.5rem; // Ensure space between title and dates
    }
}

// Dark mode / high-contrast support
@media (prefers-color-scheme: dark) {
  .job-title-box {
    // Invert colors for dark mode while maintaining contrast
    background-color: #1a365d; // Darker blue background
    color: #f0f8ff; // Lighter text for contrast
    border-color: #4a6fdc; // Keep border color similar for recognition
  }
}

// Responsive handling for very long titles
@media screen and (max-width: 768px) {
  .position-bar {
    flex-direction: column;
    align-items: flex-start;
    
    .dates {
      margin-top: 0.25rem;
      text-align: left;
      margin-left: 0;
    }
  }
  
  .job-title-box {
    max-width: 100%;
  }
}

// Experience and Education Entry Formatting
.job, .education, .project {
    margin-bottom: $spacing-medium;
    margin-left: $content-left-margin; // Ensure consistent left margin for all sections

    .job-title-line, .education-title-line, .project-title-line, .degree-line, .position-line {
        display: flex;
        justify-content: space-between;
        margin-bottom: $position-line-margin-bottom; // Use new token for consistency
        padding-left: 0; // Ensure no left padding to align with section headers
    }

    .company, .institution, .project-title, .position, .degree {
        font-weight: $font-weight-bold;
        color: $text-color-secondary;
    }

    .location, .dates {
        font-style: italic;
        color: $text-color-muted;
        text-align: right;
    }

    .job-content, .education-content, .project-content {
        margin-top: $spacing-small;
        margin-left: 0;  // No additional margin to maintain alignment with parent
        padding-left: 0; // No padding to ensure alignment with section titles
        
        p {
            margin-bottom: $spacing-xsmall;
            padding-left: 0;  // Ensure no left padding
            margin-left: 0;   // Ensure no left margin
        }
        
        .role-description-text {
            font-style: italic;
            margin-top: 0.2em;  // Add some space above the description
            margin-bottom: 0.5em; // Add some space below the description before bullets
            color: #555; // Slightly lighter text color
            padding-left: 0;  // No left padding to align with content
            margin-left: 0;   // No left margin to align with content
            display: block;  // Ensure block-level display
            width: 100%;     // Take up full width
        }
        
        // Bullet point styling
        ul {
            list-style-type: none; // Remove default bullets
            margin-left: 0; // flush with parent text block
            padding-left: $bullet-list-padding-left; // use token value for indent
        }

        li {
            position: relative;
            padding-left: $bullet-item-padding-left; // space between bullet and text
            text-indent: $bullet-item-text-indent; // pull text back to align properly
            margin-bottom: $bullet-spacing-after; // Use new token for consistent spacing
            line-height: $line-height-tight;

            &::before {
                content: $bullet-glyph;
                position: absolute;
                left: 0; // align with UL padding start
                top: 0; // align with text top
                font-size: 1em;
                color: $color-bullet;
            }
        }
    }
}

// Tight Bullet Spacing - New
ul.bullets {
    margin: 0.25rem 0 0.15rem 0;  // no left indent (handled by padding)
    padding-left: $bullet-list-padding-left;  // proper left indent from token
    list-style-type: none;  // no default bullets
    margin-left: 0; // No additional margin to maintain alignment

    li {
        position: relative;
        margin-bottom: $bullet-spacing-after; // Use new token for consistent spacing
        line-height: $font-lineHeight-tight;
        padding-left: $bullet-item-padding-left;  // space for bullet
        text-indent: $bullet-item-text-indent;  // negative indent to pull text back
        
        &::before {
            content: $bullet-glyph;  // custom bullet from token
            position: absolute;
            left: 0;
            top: 0;
            color: $color-bullet;
        }
    }
}

// Skills Section (Often just paragraphs or a list)
.skills-content {
    // Add specific styling if needed, e.g., columns
    margin-left: $content-left-margin; // Ensure consistent left margin
    
    p, ul {
         margin-bottom: $spacing-xsmall;
    }
    ul {
        list-style-type: none;
        padding-left: $bullet-list-padding-left;
    }
    li {
         position: relative;
         margin-bottom: $bullet-spacing-after; // Use new token for consistent spacing
         line-height: $line-height-tight; // Use tighter line height
         padding-left: $bullet-item-padding-left;  // space for bullet
         text-indent: $bullet-item-text-indent;  // negative indent to pull text back
         
         &::before {
             content: $bullet-glyph;  // custom bullet from token
             position: absolute;
             left: 0;
             top: 0;
             color: $color-bullet;
         }
    }
} 